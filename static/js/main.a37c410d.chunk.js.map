{"version":3,"sources":["karas.svg","calculate.ts","MultiplierInput.tsx","Form.tsx","Results.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","intOrEmpty","value","parseInt","calculate","c1","c2","c3","xMax","Math","floor","results","x","y","Number","isInteger","push","MultiplierInput","id","onChange","onAdd","useState","isActive","setIsActive","className","name","type","autoFocus","e","target","onClick","Form","targetPoints","onTargetPointsChange","multipliers","onMultipliersChange","adBonus","onAdBonusChange","numOfMultipliers","setNumOfMultipliers","placeholder","Array","fill","map","_","key","prevState","ResultLine","result","Results","Object","values","join","App","setTargetPoints","setMultipliers","setAdBonus","calcResults","setCalcResults","calculateResults","useCallback","multipliersArray","length","calculated","allResults","first","second","console","log","uniqWith","isEqual","calculateAll","bonus","bonusMultipliers","mult","lodash","sortBy","uniq","getAllMultipliers","filter","multiplier","src","karas","alt","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.a37c410d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/karas.58446c0d.svg\";","import lodash, { uniqWith, isEqual } from 'lodash';\n\ntype Result = { x: number, y: number, c1: number, c2: number, c3: number };\ntype Calculator = (c1: number, c2: number, c3: number) => Array<Result>;\n\nexport const intOrEmpty = (value: string) => value === '' ? value : parseInt(value);\n\nexport const calculate: Calculator = (c1, c2, c3) => {\n  const xMax = Math.floor(c3 / c1);\n  const results = [];\n\n  for (let x = 3; x <= xMax; x++) {\n    let y = c3 / c2 - (c1 / c2) * x;\n    if (Number.isInteger(y) && y > 2) {\n      results.push({\n        x,\n        y,\n        c1,\n        c2,\n        c3\n      });\n    }\n  }\n  return results;\n};\n\nexport const getAllMultipliers = (multipliers: Array<number>, bonus: number) => {\n  const bonusMultipliers = multipliers.map(mult => mult + bonus);\n  return lodash([...multipliers, ...bonusMultipliers])\n    .sortBy()\n    .uniq()\n    .value()\n};\n\nexport const calculateAll = (multipliers: Array<number>, target: number) => {\n  const allResults = [];\n  for (let first = 0; first < multipliers.length - 1; first++) {\n    for (let second = first; second < multipliers.length; second++) {\n      const c1 = multipliers[first];\n      const c2 = multipliers[second];\n      console.log('c1', c1, 'c2', c2);\n      allResults.push(...calculate(c1, c2, target));\n    }\n  }\n  return uniqWith(allResults, isEqual);\n};\nexport type CalcResults = ReturnType<typeof calculateAll>;\n","import React, { useState } from 'react';\n\nimport \"./MultiplierInput.css\";\nimport { intOrEmpty } from './calculate';\n\ntype Props = {\n  id: number,\n  value: number | '',\n  onChange(value: number | ''): void,\n  onAdd(): void,\n};\n\nconst MultiplierInput: React.FC<Props> = ({\n  id,\n  value,\n  onChange,\n  onAdd,\n}) => {\n  const [isActive, setIsActive] = useState(false);\n\n  return (\n    <div className=\"b-MultiplierInput\">\n      {isActive\n        ? <input\n            name={`multiplier-${id}`}\n            type=\"number\"\n            autoFocus\n            value={value}\n            onChange={(e) => { onChange(intOrEmpty(e.target.value)) } }\n          />\n        : <div onClick={() => { setIsActive(true); onAdd() }}>+</div>\n      }\n    </div>\n  );\n}\n\nexport default MultiplierInput;\n","import React, { useState } from 'react';\n\nimport MultiplierInput from './MultiplierInput';\nimport { Multipliers } from './App';\nimport './Form.css';\nimport { intOrEmpty } from './calculate';\n\ntype Props = {\n  multipliers: Multipliers,\n  onMultipliersChange(value: Multipliers): void,\n\n  targetPoints: number | '',\n  onTargetPointsChange(value: number | ''): void,\n\n  adBonus: number | '',\n  onAdBonusChange(value: number | ''): void,\n};\n\nconst Form: React.FC<Props> = ({\n  targetPoints,\n  onTargetPointsChange,\n\n  multipliers,\n  onMultipliersChange,\n\n  adBonus,\n  onAdBonusChange,\n}) => {\n  const [numOfMultipliers, setNumOfMultipliers] = useState(0);\n  return (\n    <div>\n      <div className=\"b-Form__line\">\n        <div className=\"b-Form__caption\">\n          Сколько нужно набрать\n        </div>\n        <input\n          name=\"targetPoints\"\n          type=\"number\"\n          placeholder=\"0\"\n          value={targetPoints}\n          onChange={(e) => onTargetPointsChange(intOrEmpty(e.target.value))}\n        />\n      </div>\n      <div className=\"b-Form__line\">\n        <div className=\"b-Form__caption\">\n          Множители\n        </div>\n        <div className=\"b-Form__multipliers\">\n          {Array(numOfMultipliers + 1).fill(0).map((_, id) => (\n            <MultiplierInput\n              key={`mult-${id}`}\n              id={id}\n              value={multipliers[id] || ''}\n              onChange={(value: number) => { onMultipliersChange({ ...multipliers, [id]: value }) }}\n              onAdd={() => { setNumOfMultipliers(prevState => prevState + 1) }}\n            />\n          ))}\n        </div>\n      </div>\n      <div className=\"b-Form__line\">\n        <div className=\"b-Form__caption\">\n          Бонус от рекламы\n        </div>\n        <input\n          name=\"adBonus\"\n          type=\"number\"\n          placeholder=\"0\"\n          value={adBonus}\n          onChange={(e) => onAdBonusChange(intOrEmpty(e.target.value))}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Form;\n","import React from 'react';\nimport { CalcResults } from './calculate';\nimport './Results.css';\n\ntype Props = {\n  results: CalcResults,\n};\n\nconst ResultLine: React.FC<{ result: Props['results'][0] }> = ({\n  result\n}) => (\n  <tr className=\"ResultLine\">\n    <td className=\"ResultLine__mult\">{result.c1}x</td>\n    <td className=\"ResultLine__score\">{result.x}</td>\n    <td>&nbsp;+&nbsp;</td>\n    <td className=\"ResultLine__mult\">{result.c2}x</td>\n    <td className=\"ResultLine__score\">{result.y}</td>\n  </tr>\n);\n\nconst Results: React.FC<Props> = ({\n  results,\n}) => {\n  return (\n    <code>\n      <table>\n        <tbody>\n          {results.map(result => (\n            <ResultLine result={result} key={Object.values(result).join(\", \")} />\n          ))}\n        </tbody>\n      </table>\n    </code>\n  )\n};\n\nexport default Results;\n","import React, { useCallback, useState } from 'react';\n\nimport { CalcResults, calculateAll, getAllMultipliers } from './calculate';\nimport karas from './karas.svg';\nimport './App.css';\nimport Form from './Form';\nimport Results from './Results';\n\nexport type Multipliers = { [key: string]: number | '' };\n\nfunction App() {\n  const [targetPoints, setTargetPoints] = useState<number | ''>('');\n  const [multipliers, setMultipliers] = useState<Multipliers>({});\n  const [adBonus, setAdBonus] = useState<number | ''>('');\n\n  const [calcResults, setCalcResults] = useState<CalcResults>([]);\n\n  const calculateResults = useCallback(() => {\n    if (adBonus === '') return;\n    if (targetPoints === '') return;\n    const multipliersArray = Object.values(multipliers);\n    if (multipliersArray.length === 0) return;\n    const filteredMultipliers = multipliersArray.filter(multiplier => multiplier !== '');\n\n    const allMultipliers = getAllMultipliers(filteredMultipliers as number[], adBonus);\n    const calculated = calculateAll(allMultipliers, targetPoints);\n    setCalcResults(calculated);\n  }, [adBonus, multipliers, targetPoints]);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={karas} className=\"App-logo\" alt=\"logo\" />\n      </header>\n\n      <Form\n          multipliers={multipliers}\n          onMultipliersChange={(value: Multipliers) => { setMultipliers(value) }}\n\n          targetPoints={targetPoints}\n          onTargetPointsChange={(value: number) => { setTargetPoints(value) }}\n\n          adBonus={adBonus}\n          onAdBonusChange={(value: number) => { setAdBonus(value) }}\n        />\n        <button\n          className=\"App__submit\"\n          onClick={() => calculateResults()}\n        >\n          Рассчитать\n        </button>\n        <Results\n          results={calcResults}\n        />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}